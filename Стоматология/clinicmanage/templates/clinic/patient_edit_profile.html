{% extends 'clinic/base.html' %}

{% block content %}
<!-- Редактирование профиля -->
<section class="services" style="padding: 5rem 0; background: #f8f9fa;">
  <div class="container">
    <!-- Заголовок -->
    <h2 class="section-title text-center mb-5" style="color: #0d98ba; font-family: 'Arial', sans-serif;">
      Редактировать профиль
    </h2>

    <!-- Форма редактирования -->
    <div class="service-card">
      <div class="service-body">
        <form method="post" enctype="multipart/form-data">
          {% csrf_token %}

          <!-- Все поля в одной колонке, растянутые на всю ширину -->
          <div style="display: flex; flex-direction: column; gap: 1.5rem; width: 100%;">
            <!-- Личные данные -->
            <div>
              <h4 style="font-size: 1.8rem; color: #0d98ba; margin-bottom: 1.5rem; font-weight: 600;">Личные данные</h4>
              {% for field in user_form %}
              <div class="mb-3" style="margin-bottom: 1rem; width: 100%;">
                <label for="{{ field.id_for_label }}" style="display: block; font-weight: 600; color: #2c3e50; margin-bottom: 0.5rem;">
                  {{ field.label }}
                </label>
                <div style="width: 100%; display: flex; justify-content: center;">
                  <div style="width: 100%;">
                    {{ field }}
                  </div>
                </div>
                {% if field.errors %}
                <div class="text-danger" style="font-size: 1.3rem; margin-top: 0.3rem; text-align: center;">{{ field.errors }}</div>
                {% endif %}
              </div>
              {% endfor %}
            </div>

            <!-- Контакты и фото -->
            <div>
              <h4 style="font-size: 1.8rem; color: #0d98ba; margin-bottom: 1.5rem; font-weight: 600;">Контакты и фото</h4>
              {% for field in patient_form %}
              {% if field.name != 'assigned_dentist' %}
              <div class="mb-3" style="margin-bottom: 1rem; width: 100%;">
                <label for="{{ field.id_for_label }}" style="display: block; font-weight: 600; color: #2c3e50; margin-bottom: 0.5rem;">
                  {{ field.label }}
                </label>
                <div style="width: 100%; display: flex; justify-content: center;">
                  <div style="width: 100%;">
                    {{ field }}
                  </div>
                </div>
                {% if field.errors %}
                <div class="text-danger" style="font-size: 1.3rem; margin-top: 0.3rem; text-align: center;">{{ field.errors }}</div>
                {% endif %}
              </div>
              {% endif %}
              {% endfor %}
            </div>
          </div>

          <!-- Кнопки действий -->
          <div style="text-align: center; margin-top: 2rem;">
            <button type="submit" class="hero-btn primary" style="padding: 1rem 2.5rem; font-size: 1.5rem; font-weight: 600; margin-right: 1rem;">
              Сохранить изменения
            </button>
            <a href="{% url 'patient-dashboard' %}" class="hero-btn secondary" style="background: #6c757d; color: white; padding: 1rem 2.5rem; font-size: 1.5rem; text-decoration: none; font-weight: 600;">
              Отмена
            </a>
          </div>
        </form>
      </div>
    </div>
  </div>
</section>

<!-- Стиль полей ввода -->
<style>
  .service-body input[type="text"],
  .service-body input[type="email"],
  .service-body input[type="tel"],
  .service-body input[type="date"],
  .service-body input[type="file"],
  .service-body select,
  .service-body textarea {
    width: 100% !important;
    max-width: 100% !important;
    padding: 12px;
    border: 1px solid #ddd;
    border-radius: 8px;
    font-size: 1.6rem;
    box-sizing: border-box;
  }
  .service-body input:focus,
  .service-body select:focus,
  .service-body textarea:focus {
    border-color: #0d98ba;
    outline: none;
    box-shadow: 0 0 0 2px rgba(13, 152, 186, 0.2);
  }
</style>
{% endblock %}